
<div class="row">
  <div class="col-md-9">
    <article class="content" id="_content" data-uid="">
      <h1 id="" data-uid="">Configure Health Checks (Optional)</h1>
      
<div class="video-container">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/W1LWcSUrgTs" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
<h2 id="overview">Overview</h2>
<p><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/health-checks?view=aspnetcore-6.0">Health checks</a> are the industry standard for the initial diagnostic step of the troubleshooting process, which provides information about the health and readiness of XMPro services. The health checks achieve this by performing periodic evaluations of connected services - each of which returns a status of healthy or unhealthy.</p>
<p>The health checks are disabled by default. Once the health checks are turned on, you can opt to view them in the <a href="#health-ui">Health UI</a> or add the <a href="#health-endpoints">endpoints</a> to your existing business application health monitoring IT solution.</p>
<div class="NOTE">
<h5>Note</h5>
<p>It is also possible to include <a href="#adding-third-party-endpoints">third-party endpoints</a> - enabling you to monitor all of your health checks in a central location.</p>
</div>
<h2 id="health-endpoints">Health Endpoints</h2>
<p>Each XMPro service has an endpoint that can be accessed to determine its overall health. The following health checks are performed to test different dependencies:</p>
<ol>
<li>Connection to other XMPro services</li>
<li>Connection to the databases</li>
<li>Connection to Redis Cache</li>
</ol>
<p>The raw JSON of the results can be accessed through the health path of the service's URL. For example, <em><a href="https://xmpro-ad-sample.azurewebsites.net/health">https://xmpro-ad-sample.azurewebsites.net/health</a></em></p>
<p><img src="../images/health-endpoint-result.png" alt="Fig 1: Healthy JSON output using Postman"></p>
<p>Below is the description for each entry in the health check:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Data</td>
<td>Additional data provided by the health check. By default, this is <em>empty</em>.</td>
</tr>
<tr>
<td>Description</td>
<td>An optional explanation of the health check.</td>
</tr>
<tr>
<td>Duration</td>
<td>The amount of time that the health check took to run.</td>
</tr>
<tr>
<td>Status</td>
<td>The health check status options are:<ul><li>Healthy (the connection succeeds)</li><li>Unhealthy (the connection fails or times out)</li></ul></td>
</tr>
<tr>
<td>Tags</td>
<td>Labels that are used to group or describe the kind of health check being done.</td>
</tr>
</tbody>
</table>
<h2 id="health-ui">Health UI</h2>
<p>The UI provides a user-friendly display of the responses from the health endpoints.</p>
<p>To access the health checks performed, visit the health UI of any of the services using the health-ui path. For example, <em><a href="https://xmpro-ad-sample.azurewebsites.net/health-ui.">https://xmpro-ad-sample.azurewebsites.net/health-ui.</a></em></p>
<p><em>The health check for XMPro AI was added in v4.4.5.</em></p>
<p><img src="../images/health-ui.png" alt="Fig 2: The Health Checks interface"></p>
<h2 id="configure-health-checks">Configure Health Checks</h2>
<p>The following steps describe how to turn on the health check functionality.</p>
<h3 id="application-designer">Application Designer</h3>
<ol>
<li>Navigate to the IIS location where Application Designer has been installed.</li>
<li>Open the App Designer  <em>appsettings.json</em> file.</li>
<li>Set <code>enableHealthCheck</code> in the <code>featureFlags</code> object to <em>true</em>.</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>This feature flag turns on both the <code>/health</code> and <code>/health-ui</code> endpoints.</p>
</div>
<p><img src="../images/Configure-Health-Check-setup-step-1.png" alt="Fig 3: Step 3"></p>
<ol start="4">
<li>Configure the URLs you want to include in the health checks within the <code>healthChecks</code> object. The standard endpoint for each XMPro service is <code>/health/ping</code>.</li>
</ol>
<pre><code class="lang-json">&quot;healthChecks&quot;: {
      &quot;urls&quot;: [
        {
          &quot;url&quot;: &quot;&lt;subscription manager url&gt;/health/ping&quot;,
          &quot;name&quot;: &quot;Subscription Manager API&quot;,
          &quot;tags&quot;: [ &quot;api&quot; ]
        },
        {
          &quot;url&quot;: &quot;&lt;data stream designer url&gt;/health/ping&quot;,
          &quot;name&quot;: &quot;Data Stream Designer API&quot;,
          &quot;tags&quot;: [ &quot;api&quot; ]
        },
        {
          &quot;url&quot;: &quot;&lt;xmpro ai url&gt;/health/ping&quot;,
          &quot;name&quot;: &quot;XMPro AI API&quot;,
          &quot;tags&quot;: [ &quot;api&quot; ]
        }
      ]
    }
</code></pre>
<ol start="5">
<li>Configure the <code>/health</code> endpoints you want to include in the UI within the <code>HealthChecksUI</code> object.</li>
</ol>
<pre><code class="lang-json">&quot;HealthChecksUI&quot;: {
  &quot;HealthChecks&quot;: [
    {
      &quot;name&quot;: &quot;Application Designer&quot;,
      &quot;Uri&quot;: &quot;&lt;application designer url&gt;/health&quot;
    },
    {
      &quot;name&quot;: &quot;Data Stream Designer&quot;,
      &quot;Uri&quot;: &quot;&lt;data stream designer url&gt;/health&quot;
    },
    {
      &quot;name&quot;: &quot;XMPro AI&quot;,
      &quot;Uri&quot;: &quot;&lt;xmpro ai url&gt;/health&quot;
    }
  ]
}
</code></pre>
<p><img src="../images/Configure-Health-Check-setup-step-2.png" alt="Fig 4: Step 4 and 5"></p>
<ol start="6">
<li>Save the file.</li>
<li>Restart the Application Designer service.</li>
</ol>
<h3 id="data-stream-designer">Data Stream Designer</h3>
<p>Repeat the above steps for Data Stream Designer, using these values for step 4:</p>
<pre><code class="lang-json">&quot;healthChecks&quot;: {
  &quot;urls&quot;: [
    {
      &quot;url&quot;: &quot;&lt;subscription manager url&gt;/health/ping&quot;,
      &quot;name&quot;: &quot;Subscription Manager API&quot;,
      &quot;tags&quot;: [ &quot;api&quot; ]
    },
    {
      &quot;url&quot;: &quot;&lt;application designer url&gt;/health/ping&quot;,
      &quot;name&quot;: &quot;Application Designer API&quot;,
      &quot;tags&quot;: [ &quot;api&quot; ]
    },
    {
      &quot;url&quot;: &quot;&lt;xmpro ai url&gt;/health/ping&quot;,
      &quot;name&quot;: &quot;XMPro AI API&quot;,
      &quot;tags&quot;: [ &quot;api&quot; ]
    }
  ]
}
</code></pre>
<h3 id="xmpro-ai">XMPro AI</h3>
<p>Repeat the above steps for XMPro AI, using these values for step 4:</p>
<pre><code class="lang-json">&quot;healthChecks&quot;: {
  &quot;urls&quot;: [
    {
      &quot;url&quot;: &quot;&lt;subscription manager url&gt;/health/ping&quot;,
      &quot;name&quot;: &quot;Subscription Manager API&quot;,
      &quot;tags&quot;: [ &quot;api&quot; ]
    },
    {
      &quot;url&quot;: &quot;&lt;application designer url&gt;/health/ping&quot;,
      &quot;name&quot;: &quot;Application Designer API&quot;,
      &quot;tags&quot;: [ &quot;api&quot; ]
    },
    {
      &quot;url&quot;: &quot;&lt;data stream designer url&gt;/health/ping&quot;,
      &quot;name&quot;: &quot;Data Stream Designer API&quot;,
      &quot;tags&quot;: [ &quot;api&quot; ]
    }
  ]
}
</code></pre>
<h2 id="adding-third-party-endpoints">Adding Third-Party Endpoints</h2>
<p>Third-party endpoints are supported and can be included as part of the health check. These are added in the same place as the XMPro service health checks.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Only endpoints that do not need additional authorization are currently supported for the health checks.</p>
</div>
<ol>
<li>Open the <em>appsettings.json</em> file.</li>
<li>Add third-party endpoints to the <code>healthChecks</code> object.</li>
<li>Save the file and restart the XMPro product service.</li>
</ol>
<p><img src="../images/Configure-Health-Check-setup-step-3.png" alt="Fig 5: Step 3"></p>
<p>Below are the properties in this configuration when including other URLs in the health check:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td>Determines the URL to check.</td>
</tr>
<tr>
<td>name</td>
<td>Determines the name/identifier of the health check to be performed.</td>
</tr>
<tr>
<td>tags</td>
<td>Determines the tag for the health check. This is useful for tagging/grouping health checks.</td>
</tr>
<tr>
<td>timeout</td>
<td>The amount of time to wait for a response from the site. The health check will return as <code>Unhealthy</code> if the timeout is reached while waiting for the URL. <br>By default, this is empty and will wait for the URL indefinitely.</td>
</tr>
</tbody>
</table>

    
  <div class="last-modified">
    <hr />
    <p><small><em>Last modified: May 28, 2025</em></small></p>
  </div>
</article>
  </div>
  <div class="col-md-3">

    <div class="sidenav hide-when-search">
      <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
      <div class="sidetoggle collapse" id="sidetoggle">
        <div id="sidetoc"></div>
      </div>
    </div>
  </div>
</div>

<style>
  .page-description {
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--bs-border-color);
  }
  
  .page-description p {
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 0;
    color: var(--bs-secondary-color);
  }
  
  /* Dark mode support */
  [data-bs-theme="dark"] .page-description p {
    color: var(--bs-secondary-color);
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .page-description p {
      font-size: 1rem;
    }
  }
</style>

<script>
  // Hide descriptions that are just version numbers or dates
  document.addEventListener('DOMContentLoaded', function() {
    const descriptionElement = document.querySelector('.page-description p');
    if (descriptionElement) {
      const descriptionText = descriptionElement.textContent.trim();
      
      // Patterns to hide: version numbers (like "v4.4.0", "4.4.0"), dates (like "13 Mar 2024", "2024-03-13")
      const versionPattern = /^v?\d+\.\d+(\.\d+)?$/;
      const datePattern1 = /^\d{1,2}\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec|January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{4}$/i;
      const datePattern2 = /^\d{4}-\d{2}-\d{2}$/;
      const datePattern3 = /^\d{2}\/\d{2}\/\d{4}$/;
      
      if (versionPattern.test(descriptionText) || 
          datePattern1.test(descriptionText) || 
          datePattern2.test(descriptionText) ||
          datePattern3.test(descriptionText)) {
        descriptionElement.parentElement.style.display = 'none';
      }
    }
  });
</script>