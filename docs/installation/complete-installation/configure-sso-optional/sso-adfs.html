
<div class="row">
  <div class="col-md-9">
    <article class="content" id="_content" data-uid="">
      <h1 id="" data-uid="">SSO - ADFS</h1>
      
<p>In this article, we will look at how to set up AD FS so that it can be used as an external identity provider for Subscription Manager, allowing single sign-on capability between AD FS and Subscription Manager.</p>
<p>Follow the steps below:</p>
<h2 id="iis">IIS</h2>
<ol>
<li>Navigate to the location in IIS where Subscription Manager was installed.</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>You can right-click on the application name in IIS and choose &quot;<em>Explore</em>&quot;.</p>
</div>
<p><img src="../../../images/open-sub-mgr-app.png" alt="Open Subscription Manager application"></p>
<ol start="2">
<li>Open the <em>web.config</em> file.</li>
</ol>
<p><img src="../../../images/open-web-config.png" alt="Open web.config file"></p>
<ol start="3">
<li>Scroll down to the &quot;<em>xmpro</em>&quot; section.</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>It might be encrypted, which will require you to decrypt it first. For instructions, please refer to the <a href="https://docs.xmpro.com/knowledge-base-2/how-to-encrypt-and-decrypt-a-web-config-file/index.md">How to encrypt and decrypt a web.config file</a> Knowledge Base article.</p>
</div>
<ol start="4">
<li><p>Under the &quot;<em>identityProviders</em>&quot; element, add a new element called &quot;<em>adfs</em>&quot;.</p>
</li>
<li><p>Specify the metadata address of your AD FS, as per the image below:</p>
</li>
</ol>
<p><img src="../../../images/sso-adfs-web-config-metadata-address.png" alt="ADFS web config metadata address"></p>
<div class="NOTE">
<h5>Note</h5>
<p>Set the correct URL for the metadataAddress value. An example of how the URL might look is &quot;_<a href="https://adfs.domain.com/federationmetadata/2007-06/federationmetadata.xml_%22">https://adfs.domain.com/federationmetadata/2007-06/federationmetadata.xml_&quot;</a>.</p>
<p>Verify your URL by browsing to it in a browser.</p>
</div>
<ol start="6">
<li>Copy the &quot;<em>baseUrl</em>&quot; value in the web.config - you will need it later in this guide.</li>
</ol>
<p><img src="../../../images/sso-azuread-web-config-baseurl.png" alt="Azure AD web config baseUrl"></p>
<div class="WARNING">
<h5>Warning</h5>
<p>You will use this value to create a relying party trust between the Subscription Manager application and AD FS</p>
</div>
<h2 id="server-manager">Server Manager</h2>
<ol>
<li>Log on to your AD FS server and go to Tools –&gt; AD FS Management</li>
</ol>
<p><img src="../../../images/open-ad-fs-management.png" alt="Open AD FS Management"></p>
<h3 id="relying-party-trust">Relying Party Trust</h3>
<ol start="2">
<li>Click <em>Add Relying Party Trust</em></li>
</ol>
<p><img src="../../../images/click-on-add-relying-trust.png" alt="Click on Add Relying Party Trust"></p>
<ol start="3">
<li>Select <em>Claims aware</em> and click Start</li>
</ol>
<p><img src="../../../images/select-claims-aware.png" alt="Select Claims aware"></p>
<ol start="4">
<li>Select <em>Enter data about the relying party manually</em> and click Next</li>
</ol>
<p><img src="../../../images/add-data-manually.png" alt="Add data manually"></p>
<ol start="5">
<li>Choose a display name and click Next and Next again</li>
</ol>
<p><img src="../../../images/choose-a-display-name.png" alt="Choose a display name"></p>
<ol start="6">
<li>Select <em>Enable support for the WS-Federation Passive protocol</em>, add the URL and click Next</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>This is the base URL you copied from the web.config file.</p>
</div>
<p><img src="../../../images/wsf-protocol.png" alt="WS-Federation protocol"></p>
<ol start="7">
<li><p>Add the identifier for the application. Use the URL for Subscription Manager</p>
</li>
<li><p>Add the URL and click Next</p>
</li>
</ol>
<p><img src="../../../images/unique-identifier.png" alt="Unique identifier"></p>
<ol start="9">
<li>Choose an access control policy and click Next. Continue to the last screen</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>For this article, we are going to choose <em>Permit everyone</em></p>
</div>
<p><img src="../../../images/access-control-policy.png" alt="Access control policy"></p>
<h3 id="claims-issuance-policy">Claims Issuance Policy</h3>
<ol start="10">
<li>Select <em>Configure claims issuance policy for this application</em> and finish</li>
</ol>
<p><img src="../../../images/last-screen.png" alt="Last screen"></p>
<ol start="11">
<li>In the AD FS Management window, click <em>Edit Claim Issuance Policy…</em> and click <em>Add Rule</em></li>
</ol>
<p><img src="../../../images/edit-claim-insurance-policy.png" alt="Edit claim issuance policy"></p>
<ol start="12">
<li>In the <em>Claim rule template</em> drop-down, select <em>Send LDAP Attributes as Claims</em> and click Next</li>
</ol>
<p><img src="../../../images/ldap.png" alt="LDAP attributes as claims"></p>
<ol start="13">
<li>Choose a name for the rule and map the claims</li>
</ol>
<p><img src="../../../images/edit-rule.png" alt="Edit Rule"></p>
<p><img src="../../../images/choose-a-name-for-the-rule.png" alt="Choose a name for the rule"></p>
<h2 id="login-to-subscription-manager-using-ad-fs">Login to Subscription Manager using AD FS</h2>
<p>Now you should be ready. If you navigate to the Subscription Manager application, you will see the AD FS login option. Log in with your AD FS credentials.</p>
<div class="NOTE">
<h5>Note</h5>
<p>You will be asked to link your account when you sign in for the first time. If so, fill in your information and click Link Account</p>
</div>
<p><img src="../../../images/add-adfs-credentials.png" alt="Add ADFS credentials"></p>
<p><img src="../../../images/adfs-button.png" alt="ADFS login button"></p>

    
  <div class="last-modified">
    <hr />
    <p><small><em>Last modified: May 29, 2025</em></small></p>
  </div>
</article>
  </div>
  <div class="col-md-3">

    <div class="sidenav hide-when-search">
      <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
      <div class="sidetoggle collapse" id="sidetoggle">
        <div id="sidetoc"></div>
      </div>
    </div>
  </div>
</div>

<style>
  .page-description {
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--bs-border-color);
  }
  
  .page-description p {
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 0;
    color: var(--bs-secondary-color);
  }
  
  /* Dark mode support */
  [data-bs-theme="dark"] .page-description p {
    color: var(--bs-secondary-color);
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .page-description p {
      font-size: 1rem;
    }
  }
</style>

<script>
  // Hide descriptions that are just version numbers or dates
  document.addEventListener('DOMContentLoaded', function() {
    const descriptionElement = document.querySelector('.page-description p');
    if (descriptionElement) {
      const descriptionText = descriptionElement.textContent.trim();
      
      // Patterns to hide: version numbers (like "v4.4.0", "4.4.0"), dates (like "13 Mar 2024", "2024-03-13")
      const versionPattern = /^v?\d+\.\d+(\.\d+)?$/;
      const datePattern1 = /^\d{1,2}\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec|January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{4}$/i;
      const datePattern2 = /^\d{4}-\d{2}-\d{2}$/;
      const datePattern3 = /^\d{2}\/\d{2}\/\d{4}$/;
      
      if (versionPattern.test(descriptionText) || 
          datePattern1.test(descriptionText) || 
          datePattern2.test(descriptionText) ||
          datePattern3.test(descriptionText)) {
        descriptionElement.parentElement.style.display = 'none';
      }
    }
  });
</script>