
<div class="row">
  <div class="col-md-9">
    <article class="content" id="_content" data-uid="">
      <h1 id="" data-uid="">Docker</h1>
      
<h2 id="introduction">Introduction</h2>
<p>This guide covers the XMPro Stream Host Docker image available from version 4.4.19 onwards. The latest Stream Host images have been redesigned for improved security and usability.</p>
<div class="NOTE">
<h5>Note</h5>
<p>For Stream Host images prior to v4.4.19, please refer to Docker v4.4.2 - v4.4.18 documentation.</p>
</div>
<h2 id="prerequisites">Prerequisites</h2>
<h3 id="software-requirements">Software Requirements</h3>
<p>A container runtime such as <a href="https://www.docker.com/products/docker-desktop/">Docker Desktop</a>.</p>
<h3 id="hardware-requirements">Hardware Requirements</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Small</th>
<th>Medium</th>
<th>Large</th>
</tr>
</thead>
<tbody>
<tr>
<td>Stream Host</td>
<td>1 CPU, 4 GB RAM</td>
<td>2 CPU, 8GB RAM</td>
<td>4 CPU, 16GB RAM</td>
</tr>
</tbody>
</table>
<div class="NOTE">
<h5>Note</h5>
<p>Actual resource requirements depend on your specific data streams. Monitor performance and adjust resources accordingly.</p>
</div>
<h3 id="configuration">Configuration</h3>
<p>Essential Environment Variables</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>xm__xmpro__Gateway__Id</td>
<td>Optional</td>
<td>Unique GUID identifier for this Stream Host instance.<br><em>Default: A new GUID</em></td>
</tr>
<tr>
<td>xm__xmpro__Gateway__Name</td>
<td>Optional</td>
<td>Display name in Data Stream Designer.<br><em>Default: &quot;[Image-Version]-[Gateway Id]&quot;, e.g.</em> &quot;alpine3.21-python3.12-3bd462d4-4f1f-4cda-b6c5-d02f986beb6f&quot;</td>
</tr>
<tr>
<td>xm__xmpro__Gateway__CollectionId</td>
<td>Required</td>
<td>ID of your Collection<br>(available in Data Stream Designer)</td>
</tr>
<tr>
<td>xm__xmpro__Gateway__Secret</td>
<td>Required</td>
<td>Secret key of your Collection<br>(available in Data Stream Designer)</td>
</tr>
<tr>
<td>xm__xmpro__Gateway__ServerUrl</td>
<td>Required</td>
<td>The server URL for where Data Stream Designer is hosted. E.g. <em>&quot;https://dsserver/datastreamdesigner/&quot;.</em><br><br>Please note that this URL needs to end in a forward slash.</td>
</tr>
<tr>
<td>xm__xmpro__Gateway__Rank</td>
<td>Optional</td>
<td>An integer, by default is &quot;0&quot;.<br>See <a href="../../../concepts/collection.html#stream-host-rank">Stream Host Rank</a> for further details.</td>
</tr>
</tbody>
</table>
<p>These settings can be found in Data Stream Designer:</p>
<p><img src="../../../images/image-1489.png" alt="Fig 1: Collection details in Data Stream Designer"></p>
<h2 id="docker-repository">Docker Repository</h2>
<p>Below is the XMPro Docker Stream Host repository.</p>
<pre><code>xmpro.azurecr.io/stream-host
</code></pre>
<h2 id="image-variants">Image Variants</h2>
<h3 id="version-tagging">Version Tagging</h3>
<p>All images are tagged with their version number. For example:</p>
<pre><code>xmpro.azurecr.io/stream-host:4.4.19
</code></pre>
<p>The <code>latest</code> tag points to the most recent release:</p>
<pre><code>xmpro.azurecr.io/stream-host:latest
</code></pre>
<div class="WARNING">
<h5>Warning</h5>
<p>Using the <code>latest</code> tag caches the image locally. For guaranteed latest version, specify the exact version number or re-pull the image.</p>
</div>
<h3 id="available-variants">Available Variants</h3>
<p>A Stream Host running a Data Stream must provide the capabilities to run each Agents in the Data Stream. Choose your image depending on the capabilities that are required.</p>
<table>
<thead>
<tr>
<th>Image Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>xmpro.azurecr.io/stream-host:4.4.19-bookworm-slim</code></td>
<td>Debian (Default)</td>
</tr>
<tr>
<td><code>xmpro.azurecr.io/stream-host:4.4.19-bookworm-slim-python3.12</code></td>
<td>Debian with Python</td>
</tr>
<tr>
<td><code>xmpro.azurecr.io/stream-host:4.4.19-alpine3.21</code></td>
<td>Alpine</td>
</tr>
</tbody>
</table>
<h3 id="choosing-the-right-image">Choosing the Right Image</h3>
<ul>
<li>Alpine-based images offer a smaller footprint, ideal for environments where size matters</li>
<li>Debian-based images (Bookworm Slim) provide more comprehensive tools and libraries for general use</li>
<li>Python-enabled images come with Python pre-installed for running Python-based Agents and Connectors</li>
</ul>
<h2 id="python-package-installation">Python Package Installation</h2>
<p>For Python-enabled images, you can install packages using:</p>
<p>Either a <strong><code>requirements.txt</code></strong> file,</p>
<pre><code class="lang-docker">pandas==2.1.4
numpy==1.26.3
</code></pre>
<p>Or the <strong><code>SH_PIP_MODULES</code></strong> environment variable:</p>
<pre><code>SH_PIP_MODULES = pandas==2.1.4 numpy==1.26.3
</code></pre>
<h4 id="requirementstxt-location">Requirements.txt Location</h4>
<p>Specify the location of your <code>requirements.txt</code> file using the <code>PIP_REQUIREMENTS_PATH</code> environment variable:</p>
<pre><code> # Powershell and Bash Terminal
 -v &quot;&lt;path_to_your_solution&gt;:/opt/&quot;
 -e PIP_REQUIREMENTS_PATH=&quot;/opt&quot;

 # Docker compose
 - PIP_REQUIREMENTS_PATH=/opt
volumes:
 - &quot;&lt;path_to_your_solution&gt;:/opt/&quot;
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>If not specified, the system will look for <code>requirements.txt</code> in the default path <code>/app</code>.</p>
</div>
<h3 id="installing-system-dependencies">Installing System Dependencies</h3>
<p>To install additional system packages (APK/APT), you can install it using environment variables:</p>
<pre><code>ADDITIONAL_INSTALLS=git
</code></pre>
<h2 id="deployment">Deployment</h2>
<h3 id="docker-1">Docker</h3>
<p>Replace <code>&lt;values&gt;</code> with your actual configuration settings.</p>
<h4 id="powershell">PowerShell</h4>
<pre><code class="lang-powershell">docker run `
  --name stream-host `
  --restart on-failure `
  -e &quot;XM__XMPRO__GATEWAY__COLLECTIONID=&lt;Collection ID&gt;&quot; `
  -e &quot;XM__XMPRO__GATEWAY__SECRET=&lt;Collection Secret&gt;&quot; `
  -e &quot;XM__XMPRO__GATEWAY__SERVERURL=&lt;Server URL&gt;&quot; `
  xmpro.azurecr.io/stream-host:latest
</code></pre>
<h4 id="with-optional-environment-variables">With optional environment variables:</h4>
<pre><code class="lang-powershell">docker run `
--name stream-host `
--restart on-failure `
--pull always `
-e &quot;XM__XMPRO__GATEWAY__COLLECTIONID=&lt;Collection ID&gt;&quot; `
-e &quot;XM__XMPRO__GATEWAY__SECRET=&lt;Collection Secret&gt;&quot; `
-e &quot;XM__XMPRO__GATEWAY__SERVERURL=&lt;Server URL&gt;&quot; `
-e &quot;XM__XMPRO__GATEWAY__ID=&lt;Stream Host Id&gt;&quot; `
-e &quot;XM__XMPRO__GATEWAY__NAME=&lt;Stream Host Name&gt;&quot; `
-e &quot;XM__XMPRO__GATEWAY__RANK=&lt;Stream Host Rank&gt;&quot; `
-e &quot;SH_PIP_MODULES=pandas scikit-learn numpy&quot; `
-v &quot;&lt;path_to_your_solution&gt;:/opt/&quot; `
-e &quot;PIP_REQUIREMENTS_PATH=/opt&quot; `
-e &quot;ADDITIONAL_INSTALLS=git&quot; `
xmpro.azurecr.io/stream-host:latest
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>Remove optional variables that are NOT needed.</p>
</div>
<h4 id="bashterminal">Bash/Terminal</h4>
<pre><code class="lang-bash">docker run \
--name stream-host \
--restart on-failure \
-e &quot;XM__XMPRO__GATEWAY__COLLECTIONID=&lt;Collection ID&gt;&quot; \
-e &quot;XM__XMPRO__GATEWAY__SECRET=&lt;Collection Secret&gt;&quot; \
-e &quot;XM__XMPRO__GATEWAY__SERVERURL=&lt;Server URL&gt;&quot; \
xmpro.azurecr.io/stream-host:latest
</code></pre>
<p>With optional environment variables</p>
<pre><code class="lang-bash">MSYS_NO_PATHCONV=1 docker run \
--name stream-host \
--restart on-failure \
--pull always \
-e &quot;XM__XMPRO__GATEWAY__COLLECTIONID=&lt;Collection ID&gt;&quot; \
-e &quot;XM__XMPRO__GATEWAY__SECRET=&lt;Collection Secret&gt;&quot; \
-e &quot;XM__XMPRO__GATEWAY__SERVERURL=&lt;Server URL&gt;&quot; \
-e &quot;XM__XMPRO__GATEWAY__ID=&lt;Stream Host Id&gt;&quot; \
-e &quot;XM__XMPRO__GATEWAY__NAME=&lt;Stream Host Name&gt;&quot; \
-e &quot;XM__XMPRO__GATEWAY__RANK=&lt;Stream Host Rank&gt;&quot; \
-e &quot;SH_PIP_MODULES=pandas scikit-learn numpy&quot; \
-v &quot;&lt;path_to_your_solution&gt;:/opt/&quot; \
-e &quot;PIP_REQUIREMENTS_PATH=/opt&quot; \
-e &quot;ADDITIONAL_INSTALLS=git&quot; \
xmpro.azurecr.io/stream-host:latest
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>Remove optional variables that are NOT needed.</p>
</div>
<h3 id="docker-compose">Docker Compose</h3>
<p>Create a <code>compose.yaml</code> file in your working directory:</p>
<pre><code class="lang-yaml">services:
  stream-host:
    image: xmpro.azurecr.io/stream-host:latest
    pull_policy: always
    container_name: 'stream-host'
    environment:
      - XM__XMPRO__GATEWAY__COLLECTIONID=&lt;Collection ID&gt;
      - XM__XMPRO__GATEWAY__SECRET=&lt;Collection Secret&gt;
      - XM__XMPRO__GATEWAY__SERVERURL=&lt;Server URL&gt;
    restart: on-failure
</code></pre>
<p>With optional environment variables</p>
<pre><code class="lang-yaml">services:
  stream-host:
    image: xmpro.azurecr.io/stream-host:latest
    pull_policy: always
    container_name: 'stream-host'
    environment:
      - XM__XMPRO__GATEWAY__COLLECTIONID=&lt;Collection ID&gt;
      - XM__XMPRO__GATEWAY__SECRET=&lt;Collection Secret&gt;
      - XM__XMPRO__GATEWAY__SERVERURL=&lt;Server URL&gt;
      # Optional: Uncomment if needed
      # - XM__XMPRO__GATEWAY__ID=&lt;Stream Host Id&gt;
      # - XM__XMPRO__GATEWAY__NAME=&lt;Stream Host Name&gt;
      # - XM__XMPRO__GATEWAY__RANK=&lt;Stream Host Rank&gt;
      # - SH_PIP_MODULES=pandas scikit-learn numpy
      # - PIP_REQUIREMENTS_PATH=/opt
      # - ADDITIONAL_INSTALLS=git
    # volumes:  
    # - &quot;&lt;path_to_your_solution&gt;:/opt/&quot;  
    restart: on-failure
</code></pre>
<p>Replace <code>&lt;values&gt;</code> with your actual configuration settings.</p>
<h4 id="managing-your-docker-compose-container">Managing Your Docker Compose Container</h4>
<p>Start the Stream Host:</p>
<pre><code>docker-compose up -d stream-host
</code></pre>
<p>Stop the Stream Host:</p>
<pre><code>docker-compose down
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>For more information on Docker Compose, see the <a href="https://docs.docker.com/compose/">Docker Compose Overview</a>.</p>
</div>
<h2 id="next-step">Next Step:</h2>
<p>Your Stream Host installation is now complete. To install default Agents &amp; Connectors, visit:</p>
<ul>
<li><a href="../install-connectors.html">Install Connectors</a></li>
</ul>

    
  <div class="last-modified">
    <hr />
    <p><small><em>Last modified: May 30, 2025</em></small></p>
  </div>
</article>
  </div>
  <div class="col-md-3">

    <div class="sidenav hide-when-search">
      <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
      <div class="sidetoggle collapse" id="sidetoggle">
        <div id="sidetoc"></div>
      </div>
    </div>
  </div>
</div>

<style>
  .page-description {
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--bs-border-color);
  }
  
  .page-description p {
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 0;
    color: var(--bs-secondary-color);
  }
  
  /* Dark mode support */
  [data-bs-theme="dark"] .page-description p {
    color: var(--bs-secondary-color);
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .page-description p {
      font-size: 1rem;
    }
  }
</style>

<script>
  // Hide descriptions that are just version numbers or dates
  document.addEventListener('DOMContentLoaded', function() {
    const descriptionElement = document.querySelector('.page-description p');
    if (descriptionElement) {
      const descriptionText = descriptionElement.textContent.trim();
      
      // Patterns to hide: version numbers (like "v4.4.0", "4.4.0"), dates (like "13 Mar 2024", "2024-03-13")
      const versionPattern = /^v?\d+\.\d+(\.\d+)?$/;
      const datePattern1 = /^\d{1,2}\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec|January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{4}$/i;
      const datePattern2 = /^\d{4}-\d{2}-\d{2}$/;
      const datePattern3 = /^\d{2}\/\d{2}\/\d{4}$/;
      
      if (versionPattern.test(descriptionText) || 
          datePattern1.test(descriptionText) || 
          datePattern2.test(descriptionText) ||
          datePattern3.test(descriptionText)) {
        descriptionElement.parentElement.style.display = 'none';
      }
    }
  });
</script>